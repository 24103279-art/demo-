<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P-Career | Nền Tảng Tiếng Anh Nghề Nghiệp Phenikaa</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Marked.js -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        brand: {
                            dark: '#0f172a', // Slate 900
                            primary: '#4f46e5', // Indigo 600
                            accent: '#f59e0b', // Amber 500
                            light: '#f8fafc', // Slate 50
                        }
                    }
                }
            }
        }
    </script>

    <style>
        html { scroll-behavior: smooth; }
        .glass-nav { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(0,0,0,0.05); }
        .gradient-text { background: linear-gradient(135deg, #4f46e5 0%, #f59e0b 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hero-pattern { background-image: radial-gradient(#4f46e5 1px, transparent 1px); background-size: 24px 24px; opacity: 0.1; }
        
        /* Chat & Demo UI */
        .chat-bubble { max-width: 85%; padding: 12px 16px; border-radius: 12px; margin-bottom: 10px; font-size: 0.95rem; }
        .chat-user { background: #e0e7ff; color: #312e81; margin-left: auto; border-bottom-right-radius: 4px; }
        .chat-ai { background: #fff; border: 1px solid #e2e8f0; color: #1e293b; margin-right: auto; border-bottom-left-radius: 4px; }
        .tab-btn.active { background-color: #4f46e5; color: white; border-color: #4f46e5; }
        .tab-btn { transition: all 0.3s; }
        
        /* Quiz UI */
        .quiz-option { transition: all 0.2s; cursor: pointer; }
        .quiz-option:hover { background-color: #f1f5f9; }
        .quiz-option.selected { border-color: #4f46e5; background-color: #eef2ff; }
        .quiz-option.correct { border-color: #22c55e; background-color: #f0fdf4; color: #15803d; }
        .quiz-option.wrong { border-color: #ef4444; background-color: #fef2f2; color: #b91c1c; }

        /* Markdown Styles within Demo */
        .markdown-content ul { list-style-type: disc; padding-left: 20px; }
        .markdown-content h3 { font-weight: 700; margin-top: 10px; color: #312e81; }
    </style>
</head>
<body class="bg-brand-light text-slate-800 antialiased overflow-x-hidden">

    <!-- NAVIGATION -->
    <nav class="fixed w-full z-50 glass-nav transition-all duration-300" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <div class="flex items-center space-x-2">
                    <div class="w-10 h-10 bg-brand-primary rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-lg">P</div>
                    <span class="font-bold text-2xl tracking-tight text-slate-800">P-Career</span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="#about" class="text-slate-600 hover:text-brand-primary font-medium transition">Về Dự Án</a>
                    <a href="#ecosystem" class="text-slate-600 hover:text-brand-primary font-medium transition">Hệ Sinh Thái</a>
                    <a href="#demo" class="text-slate-600 hover:text-brand-primary font-medium transition">AI Lab (Demo)</a>
                    <a href="#business" class="text-slate-600 hover:text-brand-primary font-medium transition">Mô Hình</a>
                </div>
                <button onclick="scrollToSection('demo')" class="bg-brand-dark text-white px-5 py-2.5 rounded-full font-semibold hover:bg-brand-primary transition shadow-md flex items-center text-sm">
                    <i class="fa-solid fa-rocket mr-2 text-brand-accent"></i> Trải Nghiệm Ngay
                </button>
            </div>
        </div>
    </nav>

    <!-- HERO SECTION -->
    <section id="home" class="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden bg-white">
        <div class="absolute inset-0 hero-pattern"></div>
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 flex flex-col items-center text-center">
            
            <div class="inline-flex items-center px-4 py-2 rounded-full bg-indigo-50 border border-indigo-100 text-brand-primary font-semibold text-sm mb-8 shadow-sm" data-aos="fade-down">
                <span class="w-2 h-2 rounded-full bg-brand-accent mr-2 animate-pulse"></span>
                Dành riêng cho 35.000+ Sinh viên Đại học Phenikaa
            </div>
            
            <h1 class="text-5xl lg:text-7xl font-extrabold tracking-tight mb-6 text-brand-dark leading-tight" data-aos="fade-up">
                Career-Ready English: <br>
                <span class="gradient-text">Học để làm nghề</span>, không chỉ để thi.
            </h1>
            
            <p class="text-xl text-slate-600 mb-10 max-w-2xl mx-auto leading-relaxed" data-aos="fade-up" data-aos-delay="100">
                Hệ sinh thái chuyển đổi năng lực tiếng Anh chuyên ngành (ESP) đầu tiên tích hợp <strong>AI Generative</strong>, giúp bạn tự tin chinh phục nhà tuyển dụng quốc tế.
            </p>
            
            <div class="flex flex-col sm:flex-row justify-center gap-4" data-aos="fade-up" data-aos-delay="200">
                <button onclick="scrollToSection('demo')" class="px-8 py-4 bg-brand-primary text-white rounded-xl font-bold text-lg shadow-xl hover:bg-indigo-700 transition transform hover:-translate-y-1">
                    Trải nghiệm AI Job Simulator
                </button>
                <button onclick="scrollToSection('about')" class="px-8 py-4 bg-white text-brand-dark border border-slate-200 rounded-xl font-bold text-lg shadow-md hover:bg-slate-50 transition">
                    Tìm hiểu Dự Án
                </button>
            </div>

            <!-- Stats Bar -->
            <div class="mt-16 grid grid-cols-2 md:grid-cols-4 gap-8 w-full max-w-4xl border-t border-slate-100 pt-8" data-aos="fade-up" data-aos-delay="300">
                <div><div class="text-3xl font-bold text-brand-primary">35K+</div><div class="text-xs text-slate-500 uppercase font-semibold">Sinh viên Mục tiêu</div></div>
                <div><div class="text-3xl font-bold text-brand-accent">ESP</div><div class="text-xs text-slate-500 uppercase font-semibold">Tiếng Anh Chuyên ngành</div></div>
                <div><div class="text-3xl font-bold text-slate-800">AI</div><div class="text-xs text-slate-500 uppercase font-semibold">Công nghệ Generative</div></div>
                <div><div class="text-3xl font-bold text-green-600">B2B2C</div><div class="text-xs text-slate-500 uppercase font-semibold">Mô hình Kinh doanh</div></div>
            </div>
        </div>
    </section>

    <!-- SECTION 1: ABOUT THE PROJECT -->
    <section id="about" class="py-20 bg-slate-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                <div data-aos="fade-right">
                    <h2 class="text-3xl font-bold text-brand-dark mb-6">Tại sao P-Career ra đời?</h2>
                    <p class="text-slate-600 mb-4 leading-relaxed">
                        Thị trường lao động năm 2025 đòi hỏi nhân sự chất lượng cao không chỉ giỏi chuyên môn mà còn phải thành thạo ngoại ngữ. Tuy nhiên, nghịch lý là sinh viên ra trường có bằng cấp nhưng lại thiếu **"Tiếng Anh thực chiến"**.
                    </p>
                    <div class="space-y-4 mt-6">
                        <div class="flex items-start">
                            <div class="w-10 h-10 rounded-full bg-red-100 flex items-center justify-center text-red-500 mt-1 mr-4 flex-shrink-0"><i class="fa-solid fa-triangle-exclamation"></i></div>
                            <div>
                                <h4 class="font-bold text-slate-800">Nỗi đau (Pain Point)</h4>
                                <p class="text-sm text-slate-600">Sinh viên kỹ thuật sợ giao tiếp, học tiếng Anh chung chung không áp dụng được vào công việc (đọc bản vẽ, kê đơn thuốc, viết code).</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center text-green-500 mt-1 mr-4 flex-shrink-0"><i class="fa-solid fa-bullseye"></i></div>
                            <div>
                                <h4 class="font-bold text-slate-800">Sứ mệnh (Mission)</h4>
                                <p class="text-sm text-slate-600">Chuyển dịch tư duy từ "Học để thi" sang "Học để làm nghề". Kiến tạo thế hệ sinh viên Phenikaa tự tin hội nhập toàn cầu.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="relative" data-aos="fade-left">
                    <div class="absolute inset-0 bg-brand-primary transform rotate-3 rounded-2xl opacity-10"></div>
                    <div class="bg-white p-8 rounded-2xl shadow-xl relative border border-slate-100">
                        <h3 class="font-bold text-lg mb-4 text-center">Thực trạng Sinh viên (N=35,000)</h3>
                        <div class="h-64 w-full">
                            <canvas id="problemChart"></canvas>
                        </div>
                        <p class="text-center text-xs text-slate-400 mt-4 italic">Nguồn: Khảo sát nội bộ & Báo cáo TopCV 2023</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 2: THE ECOSYSTEM -->
    <section id="ecosystem" class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <span class="text-brand-primary font-bold uppercase tracking-wider text-sm">Giải Pháp Toàn Diện</span>
                <h2 class="text-3xl lg:text-4xl font-extrabold text-brand-dark mt-2 mb-4">Hệ Sinh Thái 3 Trụ Cột</h2>
                <p class="text-lg text-slate-600 max-w-2xl mx-auto">Lộ trình "may đo" cho từng giai đoạn phát triển của sinh viên Phenikaa.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- Card 1 -->
                <div class="bg-slate-50 rounded-2xl p-8 border border-slate-100 hover:shadow-xl transition duration-300 hover:-translate-y-2 group" data-aos="fade-up" data-aos-delay="0">
                    <div class="w-14 h-14 bg-white rounded-xl shadow-sm flex items-center justify-center mb-6 text-brand-primary text-2xl group-hover:bg-brand-primary group-hover:text-white transition">
                        <i class="fa-solid fa-seedling"></i>
                    </div>
                    <h3 class="text-xl font-bold text-slate-800 mb-2">Foundation (Năm 1-2)</h3>
                    <p class="text-sm text-slate-500 mb-4 font-semibold uppercase tracking-wide">Tích hợp & Định hướng</p>
                    <p class="text-slate-600 mb-6 text-sm leading-relaxed">
                        Biến việc học tiếng Anh cơ bản thành bước đệm nghề nghiệp. Tích hợp từ vựng chuyên ngành vào giáo trình chính khóa.
                    </p>
                    <ul class="space-y-2 text-sm text-slate-700">
                        <li class="flex items-center"><i class="fa-solid fa-check text-green-500 mr-2"></i> Ngữ cảnh hóa bài học</li>
                        <li class="flex items-center"><i class="fa-solid fa-check text-green-500 mr-2"></i> Thử thách Daily Challenge</li>
                    </ul>
                </div>

                <!-- Card 2 (Highlighted) -->
                <div class="bg-brand-dark rounded-2xl p-8 border border-brand-dark shadow-2xl transform md:-translate-y-4 relative overflow-hidden" data-aos="fade-up" data-aos-delay="100">
                    <div class="absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-brand-accent rounded-full blur-2xl opacity-20"></div>
                    <div class="w-14 h-14 bg-white/10 rounded-xl flex items-center justify-center mb-6 text-brand-accent text-2xl backdrop-blur-sm">
                        <i class="fa-solid fa-rocket"></i>
                    </div>
                    <h3 class="text-xl font-bold text-white mb-2">P-Career Pro (Năm 3-4)</h3>
                    <p class="text-sm text-slate-400 mb-4 font-semibold uppercase tracking-wide">Thực chiến & Tăng tốc</p>
                    <p class="text-slate-300 mb-6 text-sm leading-relaxed">
                        Trọng tâm của dự án. Luyện tập kỹ năng phỏng vấn và làm việc 1:1 với AI trong môi trường giả lập an toàn.
                    </p>
                    <ul class="space-y-2 text-sm text-slate-300">
                        <li class="flex items-center"><i class="fa-solid fa-star text-brand-accent mr-2"></i> <strong>AI Job Simulator</strong></li>
                        <li class="flex items-center"><i class="fa-solid fa-check text-brand-accent mr-2"></i> Phản hồi thời gian thực</li>
                        <li class="flex items-center"><i class="fa-solid fa-check text-brand-accent mr-2"></i> Hồ sơ năng lực số</li>
                    </ul>
                </div>

                <!-- Card 3 -->
                <div class="bg-slate-50 rounded-2xl p-8 border border-slate-100 hover:shadow-xl transition duration-300 hover:-translate-y-2 group" data-aos="fade-up" data-aos-delay="200">
                    <div class="w-14 h-14 bg-white rounded-xl shadow-sm flex items-center justify-center mb-6 text-amber-500 text-2xl group-hover:bg-amber-500 group-hover:text-white transition">
                        <i class="fa-solid fa-certificate"></i>
                    </div>
                    <h3 class="text-xl font-bold text-slate-800 mb-2">Certification Hub</h3>
                    <p class="text-sm text-slate-500 mb-4 font-semibold uppercase tracking-wide">Mục tiêu Chứng chỉ</p>
                    <p class="text-slate-600 mb-6 text-sm leading-relaxed">
                        Tối ưu điểm số TOEIC/IELTS bằng công nghệ Adaptive Learning. Học đúng trọng tâm, vá lỗ hổng kiến thức.
                    </p>
                    <ul class="space-y-2 text-sm text-slate-700">
                        <li class="flex items-center"><i class="fa-solid fa-check text-green-500 mr-2"></i> Phân tích Gap Analysis</li>
                        <li class="flex items-center"><i class="fa-solid fa-check text-green-500 mr-2"></i> Smart Quiz Generator</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 3: LIVE DEMO (P-CAREER AI LAB) -->
    <section id="demo" class="py-20 bg-slate-100 relative overflow-hidden">
        <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5"></div>
        
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="flex flex-col md:flex-row items-center mb-10 justify-between">
                <div>
                    <span class="text-brand-primary font-bold tracking-wider uppercase text-sm">Live Experience</span>
                    <h2 class="text-3xl font-bold text-brand-dark mt-2">P-Career AI Lab <i class="fa-solid fa-microchip text-brand-accent ml-2 animate-pulse"></i></h2>
                    <p class="text-slate-600">Trải nghiệm sức mạnh của Gemini 2.5 Flash trong đào tạo ngôn ngữ.</p>
                </div>
                
                <!-- API Key Config -->
                <div class="mt-4 md:mt-0 bg-white p-3 rounded-lg shadow-sm border border-slate-200 flex items-center space-x-2">
                    <input type="password" id="apiKeyInput" placeholder="Enter Gemini API Key..." class="bg-slate-50 border-none outline-none text-sm px-2 py-1 w-48 rounded text-slate-700 focus:ring-0">
                    <button onclick="saveApiKey()" class="bg-brand-dark text-white text-xs px-3 py-1.5 rounded hover:bg-brand-primary transition">Lưu Key</button>
                </div>
            </div>

            <!-- Tab Selection -->
            <div class="flex flex-wrap gap-2 md:space-x-4 mb-6">
                <button onclick="switchTab('interview')" id="tab-interview" class="tab-btn active px-5 py-2 rounded-full border border-brand-primary font-semibold text-sm shadow-sm flex items-center bg-brand-primary text-white">
                    <i class="fa-solid fa-user-tie mr-2"></i>AI Interviewer
                </button>
                <button onclick="switchTab('quiz')" id="tab-quiz" class="tab-btn px-5 py-2 rounded-full bg-white border border-slate-200 text-slate-600 hover:border-brand-primary hover:text-brand-primary font-semibold text-sm shadow-sm flex items-center">
                    <i class="fa-solid fa-clipboard-question mr-2"></i>Smart Quiz
                </button>
                <button onclick="switchTab('email')" id="tab-email" class="tab-btn px-5 py-2 rounded-full bg-white border border-slate-200 text-slate-600 hover:border-brand-primary hover:text-brand-primary font-semibold text-sm shadow-sm flex items-center">
                    <i class="fa-solid fa-envelope mr-2"></i>Email Polisher
                </button>
                <button onclick="switchTab('cv')" id="tab-cv" class="tab-btn px-5 py-2 rounded-full bg-white border border-slate-200 text-slate-600 hover:border-brand-primary hover:text-brand-primary font-semibold text-sm shadow-sm flex items-center">
                    <i class="fa-solid fa-file-contract mr-2"></i>CV Reviewer
                </button>
            </div>

            <!-- DEMO INTERFACE CONTAINER -->
            <div class="bg-white rounded-2xl shadow-2xl overflow-hidden border border-slate-200 flex flex-col md:flex-row h-[600px] relative">
                
                <!-- LOADING OVERLAY -->
                <div id="loadingIndicator" class="absolute inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-50 hidden">
                    <div class="flex flex-col items-center">
                        <div class="flex space-x-2 mb-2">
                            <div class="w-3 h-3 bg-brand-primary rounded-full animate-bounce" style="animation-delay: 0s"></div>
                            <div class="w-3 h-3 bg-brand-accent rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
                            <div class="w-3 h-3 bg-brand-dark rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                        </div>
                        <span class="text-xs font-semibold text-brand-dark">Gemini 2.5 is thinking...</span>
                    </div>
                </div>

                <!-- 1. INTERVIEW MODE UI -->
                <div id="view-interview" class="w-full h-full flex flex-col md:flex-row">
                    <!-- Sidebar -->
                    <div class="w-full md:w-1/3 bg-slate-50 border-r border-slate-200 p-6 flex flex-col">
                        <h3 class="font-bold text-slate-700 mb-4"><i class="fa-solid fa-sliders mr-2"></i>Cấu Hình Phỏng Vấn</h3>
                        <div class="space-y-4 mb-6">
                            <div>
                                <label class="block text-xs font-semibold text-slate-500 mb-1">Chọn Ngành</label>
                                <select id="industrySelect" class="w-full p-2.5 bg-white border border-slate-300 rounded-lg text-sm outline-none focus:border-brand-primary">
                                    <option value="automotive">Kỹ thuật Ô tô</option>
                                    <option value="it">Công nghệ thông tin (IT)</option>
                                    <option value="medical">Y Dược</option>
                                    <option value="business">Kinh tế & QTKD</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-xs font-semibold text-slate-500 mb-1">Cấp độ</label>
                                <select id="levelSelect" class="w-full p-2.5 bg-white border border-slate-300 rounded-lg text-sm outline-none focus:border-brand-primary">
                                    <option value="intern">Năm 1-2 (Foundation)</option>
                                    <option value="junior">Năm 3-4 (Pro)</option>
                                </select>
                            </div>
                        </div>
                        <div class="mt-auto">
                            <button onclick="startSimulation()" class="w-full py-2.5 bg-brand-primary text-white rounded-lg font-bold shadow hover:bg-indigo-700 transition flex items-center justify-center">
                                <i class="fa-solid fa-play mr-2"></i> Bắt đầu Phỏng vấn
                            </button>
                        </div>
                    </div>
                    <!-- Chat Area -->
                    <div class="w-full md:w-2/3 flex flex-col bg-slate-50/30">
                        <div class="h-14 border-b border-slate-200 bg-white flex items-center px-6 justify-between">
                            <div class="flex items-center">
                                <div class="w-2 h-2 rounded-full bg-green-500 mr-2 animate-pulse"></div>
                                <span class="font-semibold text-sm text-slate-700">Interview Session #PC-2025</span>
                            </div>
                            <button onclick="clearChat()" class="text-xs text-slate-400 hover:text-red-500 transition"><i class="fa-solid fa-trash"></i> Reset</button>
                        </div>
                        <div id="chatContainer" class="flex-grow overflow-y-auto p-6">
                            <div class="chat-ai chat-bubble">
                                Xin chào! Tôi là <strong>P-Career AI Mentor</strong>. <br>
                                Vui lòng nhập API Key và nhấn "Bắt đầu" để khởi động.
                            </div>
                        </div>
                        <div class="p-4 bg-white border-t border-slate-200">
                            <div class="flex items-center space-x-2 relative">
                                <input type="text" id="userInput" placeholder="Nhập câu trả lời (Tiếng Anh)..." class="flex-grow p-3 bg-slate-50 border border-slate-300 rounded-xl focus:ring-2 focus:ring-brand-primary outline-none pr-10" onkeypress="handleKeyPress(event, 'chat')">
                                <button onclick="sendMessage()" class="bg-brand-dark text-white p-3 rounded-xl hover:bg-brand-primary transition w-12 flex-shrink-0 flex items-center justify-center">
                                    <i class="fa-solid fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 2. SMART QUIZ MODE UI (NEW) -->
                <div id="view-quiz" class="w-full h-full flex hidden">
                    <div class="w-full md:w-1/3 bg-slate-50 border-r border-slate-200 p-6 flex flex-col">
                        <h3 class="font-bold text-slate-700 mb-4"><i class="fa-solid fa-clipboard-question mr-2"></i>Tạo Đề Trắc Nghiệm</h3>
                        <p class="text-sm text-slate-500 mb-6">AI sẽ tự động sinh ra bộ câu hỏi chuyên ngành để kiểm tra kiến thức của bạn.</p>
                        
                        <div class="space-y-4">
                             <div>
                                <label class="block text-xs font-semibold text-slate-500 mb-1">Chủ đề (Topic)</label>
                                <input type="text" id="quizTopic" placeholder="VD: EV Battery, ReactJS Hooks, Pharmacology..." class="w-full p-2.5 bg-white border border-slate-300 rounded-lg text-sm outline-none focus:border-brand-primary">
                            </div>
                            <div>
                                <label class="block text-xs font-semibold text-slate-500 mb-1">Độ khó</label>
                                <select id="quizDifficulty" class="w-full p-2.5 bg-white border border-slate-300 rounded-lg text-sm outline-none focus:border-brand-primary">
                                    <option value="Beginner">Cơ bản</option>
                                    <option value="Intermediate">Trung bình</option>
                                    <option value="Advanced">Nâng cao</option>
                                </select>
                            </div>
                            <button onclick="generateQuiz()" class="w-full py-2.5 bg-brand-accent text-white rounded-lg font-bold shadow-md hover:bg-amber-600 transition mt-4">
                                <i class="fa-solid fa-magic mr-2"></i> Tạo Bài Thi (5 Câu)
                            </button>
                        </div>
                    </div>
                    <div class="w-full md:w-2/3 bg-slate-100 p-8 overflow-y-auto">
                        <div id="quizContainer" class="max-w-2xl mx-auto">
                            <div class="flex flex-col items-center justify-center h-64 text-slate-400">
                                <i class="fa-solid fa-brain text-4xl mb-3"></i>
                                <p>Nhập chủ đề và nhấn "Tạo Bài Thi" để bắt đầu.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 3. EMAIL POLISHER MODE UI -->
                <div id="view-email" class="w-full h-full flex hidden">
                    <div class="w-full md:w-1/2 bg-white p-6 border-r border-slate-200 flex flex-col">
                        <h3 class="font-bold text-slate-700 mb-2">Bản Nháp (Draft)</h3>
                        <textarea id="emailInput" class="flex-grow p-4 bg-slate-50 border border-slate-200 rounded-xl outline-none resize-none focus:border-brand-primary" placeholder="VD: Hi Mr. John, I want to apply for job. Here is my CV..."></textarea>
                        <button onclick="polishEmail()" class="mt-4 w-full py-2.5 bg-brand-dark text-white rounded-lg font-bold shadow hover:bg-brand-primary transition">
                            <i class="fa-solid fa-wand-magic-sparkles mr-2"></i> Chuẩn hóa Business English
                        </button>
                    </div>
                    <div class="w-full md:w-1/2 bg-indigo-50 p-6 flex flex-col">
                        <h3 class="font-bold text-slate-700 mb-2">Kết Quả (Polished)</h3>
                        <div id="emailOutput" class="flex-grow p-4 bg-white border border-indigo-100 rounded-xl shadow-sm overflow-y-auto markdown-content text-sm text-slate-700">
                            <p class="text-slate-400 italic mt-10 text-center">Kết quả sẽ hiển thị tại đây...</p>
                        </div>
                    </div>
                </div>

                <!-- 4. CV REVIEWER MODE UI -->
                <div id="view-cv" class="w-full h-full flex hidden">
                    <div class="w-full md:w-1/2 bg-white p-6 border-r border-slate-200 flex flex-col overflow-y-auto">
                        <h3 class="font-bold text-slate-700 mb-4">Phân tích CV</h3>
                        <div class="mb-4">
                            <label class="block text-xs font-semibold text-slate-500 mb-1">Vị trí ứng tuyển</label>
                            <input type="text" id="cvRole" placeholder="VD: Junior Developer..." class="w-full p-2.5 bg-slate-50 border border-slate-300 rounded-lg text-sm outline-none focus:border-brand-primary">
                        </div>
                        <div class="mb-4 flex-grow">
                            <label class="block text-xs font-semibold text-slate-500 mb-1">Nội dung CV</label>
                            <textarea id="cvContent" class="w-full h-40 p-3 bg-slate-50 border border-slate-300 rounded-lg text-sm outline-none resize-none focus:border-brand-primary" placeholder="Paste CV content here..."></textarea>
                        </div>
                        <button onclick="analyzeCV()" class="w-full py-2.5 bg-brand-primary text-white rounded-lg font-bold shadow hover:bg-indigo-700 transition">
                            <i class="fa-solid fa-chart-pie mr-2"></i> Chấm điểm CV
                        </button>
                    </div>
                    <div class="w-full md:w-1/2 bg-stone-50 p-6 flex flex-col overflow-y-auto">
                        <h3 class="font-bold text-slate-700 mb-4">Báo cáo Đánh giá</h3>
                        <div id="cvOutput" class="flex-grow p-4 bg-white border border-slate-200 rounded-xl shadow-sm markdown-content text-sm text-slate-700">
                            <div class="flex flex-col items-center justify-center h-full text-slate-400">
                                <i class="fa-regular fa-file-lines text-4xl mb-3"></i>
                                <p>Kết quả phân tích sẽ hiển thị tại đây.</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </section>

    <!-- SECTION 4: BUSINESS MODEL -->
    <section id="business" class="py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-brand-dark">Mô Hình Kinh Doanh (BMC)</h2>
                <p class="text-slate-600">Đảm bảo tính khả thi và bền vững tài chính.</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="p-6 border border-slate-200 rounded-xl hover:shadow-lg transition bg-slate-50">
                    <h4 class="font-bold text-lg mb-2 text-indigo-600">1. Khách Hàng (Customer)</h4>
                    <p class="text-sm text-slate-600">B2C: SV Phenikaa (Năm 1-4).<br>B2B: Nhà trường & Doanh nghiệp tuyển dụng.</p>
                </div>
                <div class="p-6 border border-slate-200 rounded-xl hover:shadow-lg transition bg-slate-50">
                    <h4 class="font-bold text-lg mb-2 text-amber-600">2. Giá Trị (Value Prop)</h4>
                    <p class="text-sm text-slate-600">May đo theo chuyên ngành hẹp.<br>Công nghệ AI Job Simulator độc quyền.</p>
                </div>
                <div class="p-6 border border-slate-200 rounded-xl hover:shadow-lg transition bg-slate-50">
                    <h4 class="font-bold text-lg mb-2 text-green-600">3. Doanh Thu (Revenue)</h4>
                    <p class="text-sm text-slate-600">Freemium (Gói Pro 99k).<br>Licensing & Phí kết nối nhân sự.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="bg-brand-dark text-slate-400 py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center">
            <div class="mb-4 md:mb-0">
                <span class="font-bold text-xl text-white">P-Career</span>
                <p class="text-sm mt-1">Dự án Khởi nghiệp EdTech - Đại học Phenikaa 2025.</p>
            </div>
            <div class="text-sm">
                &copy; 2025 P-Career Team. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // Init AOS Animation
        AOS.init({ duration: 800, once: true });

        // Init Chart
        document.addEventListener('DOMContentLoaded', function() {
            const ctxProblem = document.getElementById('problemChart').getContext('2d');
            new Chart(ctxProblem, {
                type: 'bar',
                data: {
                    labels: ['Tự tin giao tiếp', 'Đáp ứng chuẩn DN', 'Đạt chuẩn đầu ra (L1)'],
                    datasets: [{
                        label: 'Tỷ lệ (%)',
                        data: [38, 28, 48],
                        backgroundColor: ['#e2e8f0', '#f59e0b', '#4f46e5'],
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { y: { beginAtZero: true, max: 100 } }
                }
            });
        });

        // --- GLOBAL VARIABLES ---
        let apiKey = "";
        let chatHistory = [];
        let currentQuizData = [];

        function saveApiKey() {
            const input = document.getElementById('apiKeyInput').value;
            if(input.trim().length > 0) {
                apiKey = input.trim();
                alert("API Key đã lưu! Hệ thống đã sẵn sàng.");
                document.getElementById('apiKeyInput').value = "*****************";
            } else {
                alert("Vui lòng nhập API Key.");
            }
        }

        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({behavior: 'smooth'});
        }

        function switchTab(tabName) {
            const views = ['interview', 'quiz', 'email', 'cv'];
            views.forEach(v => {
                document.getElementById('view-' + v).classList.add('hidden');
                document.getElementById('view-' + v).classList.remove('flex');
                
                const btn = document.getElementById('tab-' + v);
                if(btn) {
                    btn.classList.remove('active', 'bg-brand-primary', 'text-white', 'border-brand-primary');
                    btn.classList.add('bg-white', 'text-slate-600', 'border-slate-200');
                }
            });
            
            const selectedView = document.getElementById('view-' + tabName);
            selectedView.classList.remove('hidden');
            selectedView.classList.add('flex');

            const activeBtn = document.getElementById('tab-' + tabName);
            activeBtn.classList.add('active', 'bg-brand-primary', 'text-white', 'border-brand-primary');
            activeBtn.classList.remove('bg-white', 'text-slate-600', 'border-slate-200');
        }

        // --- COMMON API CALL ---
        async function callGemini(prompt, history = []) {
            if (!apiKey) { alert("Vui lòng nhập API Key!"); return null; }
            document.getElementById('loadingIndicator').classList.remove('hidden');
            
            try {
                // Using gemini-2.5-flash-preview-09-2025 as requested
                const payload = { contents: history.length > 0 ? history : [{ parts: [{ text: prompt }] }] };
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const data = await response.json();
                if(data.error) throw new Error(data.error.message);
                return data.candidates[0].content.parts[0].text;
            } catch (error) {
                alert("Error: " + error.message);
                return null;
            } finally {
                document.getElementById('loadingIndicator').classList.add('hidden');
            }
        }

        // --- 1. INTERVIEW SIMULATION ---
        const industryPrompts = {
            "automotive": "Senior Lead Engineer at VinFast. Focus on EV systems, BMS.",
            "it": "Tech Lead at Google. Focus on algorithms, SDLC.",
            "medical": "Chief Pharmacist. Focus on drug interactions.",
            "business": "Marketing Director. Focus on ROI, campaigns."
        };

        function addMessage(sender, text, isHtml = false) {
            const container = document.getElementById('chatContainer');
            const div = document.createElement('div');
            div.className = sender === 'user' ? 'chat-user chat-bubble' : 'chat-ai chat-bubble';
            if (isHtml) div.innerHTML = text; else div.textContent = text;
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }

        function clearChat() {
            document.getElementById('chatContainer').innerHTML = '';
            chatHistory = [];
        }

        function startSimulation() {
            const industry = document.getElementById('industrySelect').value;
            const context = industryPrompts[industry];
            clearChat();
            chatHistory = [
                { role: "user", parts: [{ text: `Act as a ${context}. Interview me for a junior position. Ask one technical question at a time. Keep it professional. Wait for my answer.` }] },
                { role: "model", parts: [{ text: "Understood. I am ready to begin the interview." }] }
            ];
            
            const firstQ = "Hello. Let's start. Can you briefly introduce your technical background related to this position?";
            addMessage('ai', firstQ);
            chatHistory.push({ role: "model", parts: [{ text: firstQ }] });
        }

        async function sendMessage() {
            const input = document.getElementById('userInput');
            const text = input.value.trim();
            if (!text) return;
            
            addMessage('user', text);
            input.value = '';
            chatHistory.push({ role: "user", parts: [{ text: text }] });
            
            const aiReply = await callGemini(null, chatHistory);
            if (aiReply) {
                addMessage('ai', marked.parse(aiReply), true);
                chatHistory.push({ role: "model", parts: [{ text: aiReply }] });
            }
        }

        function handleKeyPress(e, ctx) { if (e.key === 'Enter') sendMessage(); }

        // --- 2. SMART QUIZ GENERATOR (NEW) ---
        async function generateQuiz() {
            const topic = document.getElementById('quizTopic').value;
            const diff = document.getElementById('quizDifficulty').value;
            if(!topic) { alert("Vui lòng nhập chủ đề!"); return; }

            const prompt = `Generate 5 multiple choice questions about "${topic}" for ${diff} level students.
            Return ONLY a valid JSON array. Each object must have:
            - "question": string
            - "options": array of 4 strings
            - "correctIndex": integer (0-3)
            - "explanation": string (brief explanation of the correct answer)
            Do not use Markdown code blocks. Just the raw JSON.`;

            const res = await callGemini(prompt);
            if(res) {
                try {
                    // Clean up potential markdown formatting if Gemini adds it
                    const jsonStr = res.replace(/```json/g, '').replace(/```/g, '').trim();
                    currentQuizData = JSON.parse(jsonStr);
                    renderQuiz();
                } catch (e) {
                    alert("Could not parse AI response. Try again.");
                    console.error(e, res);
                }
            }
        }

        function renderQuiz() {
            const container = document.getElementById('quizContainer');
            let html = '';
            currentQuizData.forEach((q, idx) => {
                html += `
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 mb-6">
                        <h4 class="font-bold text-lg mb-4 text-brand-dark">${idx + 1}. ${q.question}</h4>
                        <div class="space-y-2">
                            ${q.options.map((opt, i) => `
                                <div class="quiz-option p-3 rounded-lg border border-slate-200 text-sm" 
                                     onclick="checkAnswer(${idx}, ${i}, this)">
                                    ${opt}
                                </div>
                            `).join('')}
                        </div>
                        <div id="explanation-${idx}" class="hidden mt-4 p-3 bg-indigo-50 text-sm text-indigo-800 rounded-lg border border-indigo-100">
                            <strong>Explanation:</strong> ${q.explanation}
                        </div>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        function checkAnswer(qIdx, optIdx, element) {
            const q = currentQuizData[qIdx];
            const parent = element.parentElement;
            
            // Disable clicks
            Array.from(parent.children).forEach(child => child.classList.add('pointer-events-none'));

            if (optIdx === q.correctIndex) {
                element.classList.add('correct');
            } else {
                element.classList.add('wrong');
                parent.children[q.correctIndex].classList.add('correct');
            }
            
            document.getElementById(`explanation-${qIdx}`).classList.remove('hidden');
        }

        // --- 3. EMAIL POLISHER ---
        async function polishEmail() {
            const draft = document.getElementById('emailInput').value;
            if(!draft) return;
            const prompt = `Rewrite this email to be professional Business English: "${draft}"`;
            const res = await callGemini(prompt);
            if(res) document.getElementById('emailOutput').innerHTML = marked.parse(res);
        }

        // --- 4. CV REVIEWER ---
        async function analyzeCV() {
            const role = document.getElementById('cvRole').value;
            const cv = document.getElementById('cvContent').value;
            if(!role || !cv) return;
            const prompt = `Analyze this CV for role "${role}". Provide Match Score (%), Strengths, Weaknesses, and Missing Keywords. CV: "${cv}"`;
            const res = await callGemini(prompt);
            if(res) document.getElementById('cvOutput').innerHTML = marked.parse(res);
        }

        // Navbar Scroll
        window.addEventListener('scroll', () => {
            const nav = document.getElementById('navbar');
            if (window.scrollY > 50) nav.classList.add('shadow-md', 'bg-white/95');
            else nav.classList.remove('shadow-md', 'bg-white/95');
        });
    </script>
</body>
</html>
